# 最終テスト手順

## 🚀 準備

```bash
npm run compile
code .
# F5キーで起動
```

## ✅ テスト項目

### テスト1: 👻アイコンが1つだけ表示される

**手順:**
1. `test-samples/sample.js` を開く
2. `myTestFunction` をクリック

**期待される結果:**
```javascript
👻 function myTestFunction() {
^--- 👻が1つだけ
```

- ✅ 👻が1つだけ表示される
- ✅ 2つ以上表示されない
- ✅ 赤い破線枠は表示されない

✅ **合格** / ❌ **不合格**

---

### テスト2: 👻の位置にホバーでガイド表示

**手順:**
1. テスト1の状態から続行
2. **👻アイコンにマウスホバー**

**期待される結果:**
- ✅ ホバー情報が表示される
- ✅ ショートカット一覧が表示される

✅ **合格** / ❌ **不合格**

---

### テスト3: 関数名にホバーしても何も起きない

**手順:**
1. テスト1の状態から続行
2. **関数名（`myTestFunction`）にマウスホバー**

**期待される結果:**
- ✅ ホバー情報は表示されない
- ✅ 通常のVS Codeのホバー情報のみ表示される
- ✅ Ghostのガイドは表示されない

✅ **合格** / ❌ **不合格**

---

### テスト4: キーが文字として挿入されない

**手順:**
1. 関数をクリック
2. 👻にホバー
3. **Rキー**を押す

**期待される結果:**
- ✅ 参照パネルが開く
- ✅ **「R」という文字は入力されない**
- ✅ カーソル位置に何も挿入されない

✅ **合格** / ❌ **不合格**

---

### テスト5: 繰り返し使用できる

**手順:**
1. 関数をクリック
2. 👻にホバー → Rキー → 参照表示
3. 👻にホバー → Dキー → 定義ジャンプ
4. 👻にホバー → Hキー → 呼び出し階層

**期待される結果:**
- ✅ クリックし直す必要なし
- ✅ 何度でも使える
- ✅ 👻は残り続ける

✅ **合格** / ❌ **不合格**

---

### テスト6: 変数でも動作する

**手順:**
1. `const myVariable = 42;` の `myVariable` をクリック
2. 👻にホバー
3. Dキーを押す

**期待される結果:**
- ✅ 👻が1つだけ表示される
- ✅ ガイドが表示される
- ✅ 定義へジャンプ
- ✅ 「D」は入力されない

✅ **合格** / ❌ **不合格**

---

### テスト7: メソッド呼び出しでも動作する

**手順:**
1. ファイル内の `myTestFunction();` をクリック
2. 👻にホバー
3. Hキーを押す

**期待される結果:**
- ✅ 👻が表示される
- ✅ ガイドが表示される
- ✅ 呼び出し階層が表示される

✅ **合格** / ❌ **不合格**

---

### テスト8: 別の場所をクリックで切り替わる

**手順:**
1. 関数Aをクリック → 👻A表示
2. 関数Bをクリック → 👻B表示

**期待される結果:**
- ✅ 👻Aが消える
- ✅ 👻Bが表示される
- ✅ 👻は1つだけ

✅ **合格** / ❌ **不合格**

---

## 📊 テスト結果

| テスト | 内容 | 結果 |
|--------|------|------|
| 1 | 👻が1つだけ | ✅/❌ |
| 2 | 👻にホバーでガイド表示 | ✅/❌ |
| 3 | 関数名にホバーしても何も起きない | ✅/❌ |
| 4 | キーが挿入されない | ✅/❌ |
| 5 | 繰り返し使用できる | ✅/❌ |
| 6 | 変数でも動作する | ✅/❌ |
| 7 | メソッド呼び出しでも動作 | ✅/❌ |
| 8 | 切り替わる | ✅/❌ |

**合格数:** ___ / 8

---

## 🔍 ログの確認

Console タブで以下を確認：

### 確認1: クリック時
```
[Ghost] 🟢 クリック検出: word="...", context="...", line=..., active=true
[Ghost] 🎨 ゴーストエリアを表示: line=..., position=... (インデント位置)
[Ghost] ♾️  タイムアウトなし - 他の場所をクリックするまで維持
```

### 確認2: ホバー時
```
[Ghost] 👆 ホバー検出 #1: line=..., char=..., active=true
[Ghost] ✅ 👻アイコンにホバー！ホバー情報を表示
```

### 確認3: キー押下時
```
[Ghost] ⌨️  キー入力: "R", active=true, word="..."
[Ghost] 🚀 ショートカット実行
[Ghost] 💚 ゴースト状態を維持（クリアしない）
[Ghost] ✅ ショートカット実行完了 - undefined を返す（文字入力を完全にブロック）
```

---

## 🐛 もし問題があれば

### 報告してほしい情報

1. **どのテストで不合格か**
2. **Console タブのログ**（全体）
3. **どのような動作が起きたか**

---

**すべてのテストが合格することを期待しています！** 🎉






